generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model User {
  uid            String         @id @default(uuid()) @db.VarChar(255)
  name           String?
  email          String         @unique
  image          String?
  budgetItems    BudgetItem[]
  transactions   Transaction[]  // The user owns the transactions too
  createdAt      DateTime       @default(now()) @db.Timestamp(6)
}

model BudgetItem {
  id            String        @id @default(uuid())
  category      String        // e.g., "Car", "Housing", "Variables"
  name          String        // e.g., "Gas", "Rent", "Netflix"
  amount        Float         // This is your monthly TARGET from the spreadsheet
  month         Int      
  year          Int      
  uid           String
  user          User          @relation(fields: [uid], references: [uid])
  transactions  Transaction[] // Links individual card swipes to this budget bucket
  createdAt     DateTime      @default(now())
}

model Transaction {
  id            String      @id @default(uuid())
  description   String      // The raw bank text (e.g., "CHEVRON 0045")
  amount        Float
  date          DateTime
  source        String      // "My Card", "Wife's Card", "Family Card"
  budgetItemId  String?     // Optional until categorized
  budgetItem    BudgetItem? @relation(fields: [budgetItemId], references: [id])
  uid           String
  user          User        @relation(fields: [uid], references: [uid])
}


